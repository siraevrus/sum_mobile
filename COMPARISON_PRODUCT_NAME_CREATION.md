## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–∏—è –∏–º—ë–Ω —Ç–æ–≤–∞—Ä–æ–≤: "–ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞" vs "–¢–æ–≤–∞—Ä—ã –≤ –ø—É—Ç–∏"

### üìã –ö–†–ê–¢–ö–û–ï –†–ï–ó–Æ–ú–ï

–û–±–∞ —Ä–∞–∑–¥–µ–ª–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç **–æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –∞–ª–≥–æ—Ä–∏—Ç–º** —Å–æ–∑–¥–∞–Ω–∏—è –∏–º—ë–Ω —Ç–æ–≤–∞—Ä–æ–≤, –Ω–æ —Å –Ω–µ–∫–æ—Ç–æ—Ä—ã–º–∏ –≤–∞–∂–Ω—ã–º–∏ **–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–º–∏ —Ä–∞–∑–ª–∏—á–∏—è–º–∏**:

| –ê—Å–ø–µ–∫—Ç | –ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ | –¢–æ–≤–∞—Ä—ã –≤ –ø—É—Ç–∏ |
|--------|------------------|-----------------|
| **–§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–º–µ–Ω–∏** | `_generateProductName()` –≤ —Ñ–æ—Ä–º–µ | `_generateProductName(index)` –≤ —Ñ–æ—Ä–º–µ |
| **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã** | ‚ùå –ù–ï –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è | ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è |
| **–°–æ—Å—Ç–æ—è–Ω–∏–µ —Ñ–æ—Ä–º—ã** | –ü—Ä–æ—Å—Ç–æ–µ (1 —Ç–æ–≤–∞—Ä) | –°–ª–æ–∂–Ω–æ–µ (–º–∞—Å—Å–∏–≤ —Ç–æ–≤–∞—Ä–æ–≤ –≤ `_products`) |
| **–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–º–µ–Ω–∏** | –°–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ | –°–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ |

---

## üîç –î–ï–¢–ê–õ–¨–ù–´–ô –ê–ù–ê–õ–ò–ó

### 1. –ê–õ–ì–û–†–ò–¢–ú –°–û–ó–î–ê–ù–ò–Ø –ò–ú–ï–ù–ò

#### –û–±–∞ —Ä–∞–∑–¥–µ–ª–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º:

```dart
// –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏–º–µ–Ω–∏:
// [–ù–∞–∑–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞]: [–ê—Ç—Ä–∏–±—É—Ç—ã —Ñ–æ—Ä–º—É–ª—ã (x —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å)], [–û—Å—Ç–∞–ª—å–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã]

–ü—Ä–∏–º–µ—Ä: "–î–æ—Å–∫–∞: 20 x 30, –°–æ—Å–Ω–∞"
         ^^^^^^^^  ^^   ^^  ^^^^^
         —à–∞–±–ª–æ–Ω   —Ñ–æ—Ä–º—É–ª–∞  –æ—Å—Ç–∞–ª—å–Ω—ã–µ
```

#### –®–∞–≥–∏ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ (–æ–¥–∏–Ω–∞–∫–æ–≤—ã –≤ –æ–±–æ–∏—Ö –º–µ—Å—Ç–∞—Ö):

```dart
1. –ü–æ–ª—É—á–∏—Ç—å –∞—Ç—Ä–∏–±—É—Ç—ã –∏–∑ —à–∞–±–ª–æ–Ω–∞ —Ç–æ–≤–∞—Ä–∞
2. –†–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ –¥–≤–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:
   - formulaAttributes (—Ç–µ, —É –∫–æ—Ç–æ—Ä—ã—Ö isInFormula = true)
   - regularAttributes (type == 'number' || type == 'select')
3. –°–æ–±—Ä–∞—Ç—å —á–∞—Å—Ç–∏:
   - nameParts[0] = —à–∞–±–ª–æ–Ω.name
   - –ï—Å–ª–∏ –µ—Å—Ç—å formulaAttributes ‚Üí nameParts.add(join(' x '))
   - –ï—Å–ª–∏ –µ—Å—Ç—å regularAttributes ‚Üí nameParts.add(join(', '))
4. –û–±—ä–µ–¥–∏–Ω–∏—Ç—å: nameParts.join(': ')
```

---

## üìå –û–¢–õ–ò–ß–ò–ï #1: –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –•–†–ê–ù–ï–ù–ò–Ø –î–ê–ù–ù–´–•

### –ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ (product_inflow_form_page.dart)

```dart
// –õ–∏–Ω–µ–π–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ - –æ–¥–∏–Ω —Ç–æ–≤–∞—Ä
class _ProductInflowFormPageState {
  final _quantityController = TextEditingController();
  final _nameController = TextEditingController();
  Map<String, TextEditingController> _attributeControllers = {};
  ProductTemplateModel? _selectedTemplate;
  
  // –°–æ–∑–¥–∞–Ω–∏–µ –∏–º–µ–Ω–∏ –¥–ª—è –û–î–ù–û–ì–û —Ç–æ–≤–∞—Ä–∞
  String _generateProductName() {
    if (_selectedTemplate == null) return '';
    
    final formulaAttributes = <String>[];
    final regularAttributes = <String>[];
    
    for (final attribute in _selectedTemplate!.attributes) {
      final value = _attributeControllers[attribute.variable]?.text ?? '';
      if (value.isEmpty) continue;
      
      if (attribute.isInFormula) {
        formulaAttributes.add(value);
      } else if (attribute.type == 'number' || attribute.type == 'select') {
        regularAttributes.add(value);
      }
    }
    
    final List<String> nameParts = [_selectedTemplate!.name];
    if (formulaAttributes.isNotEmpty) {
      nameParts.add(formulaAttributes.join(' x '));
    }
    if (regularAttributes.isNotEmpty) {
      nameParts.add(regularAttributes.join(', '));
    }
    
    return nameParts.join(': ');
  }
}
```

**–í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏:**
```dart
// –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
void _onQuantityChanged() {
  _calculateNameAndVolume();  // ‚Üê –≤—ã–∑—ã–≤–∞–µ—Ç _generateProductName()
}

// –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∞—Ç—Ä–∏–±—É—Ç–∞
void _onAttributeChanged() {
  _calculateNameAndVolume();  // ‚Üê –≤—ã–∑—ã–≤–∞–µ—Ç _generateProductName()
}
```

### –¢–æ–≤–∞—Ä—ã –≤ –ø—É—Ç–∏ (product_in_transit_form_page.dart)

```dart
// –ú–∞—Å—Å–∏–≤–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ - –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤
class _ProductInTransitFormPageState {
  List<ProductFormData> _products = [];  // ‚Üê –ú–∞—Å—Å–∏–≤!
  
  // –ö–∞–∂–¥—ã–π —Ç–æ–≤–∞—Ä –∏–º–µ–µ—Ç —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ
  class ProductFormData {
    final Map<String, TextEditingController> attributeControllers;
    final TextEditingController quantityController;
    final ProductTemplateModel? template;
    final String name;
    final String calculatedVolume;
    // ...
  }
  
  // –°–æ–∑–¥–∞–Ω–∏–µ –∏–º–µ–Ω–∏ –¥–ª—è –ö–û–ù–ö–†–ï–¢–ù–û–ì–û —Ç–æ–≤–∞—Ä–∞ –ø–æ –∏–Ω–¥–µ–∫—Å—É
  String _generateProductName(int index) {
    final product = _products[index];  // ‚Üê –ü–æ–ª—É—á–∞–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–æ–≤–∞—Ä
    if (product.template == null) return '';
    
    final formulaAttributes = <String>[];
    final regularAttributes = <String>[];
    
    for (final attribute in product.template!.attributes) {
      // –ò—Å–ø–æ–ª—å–∑—É–µ–º –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –∏–∑ product
      final value = product.attributeControllers[attribute.variable]?.text ?? '';
      if (value.isEmpty) continue;
      
      if (attribute.isInFormula) {
        formulaAttributes.add(value);
      } else if (attribute.type == 'number' || attribute.type == 'select') {
        regularAttributes.add(value);
      }
    }
    
    final List<String> nameParts = [product.template!.name];
    if (formulaAttributes.isNotEmpty) {
      nameParts.add(formulaAttributes.join(' x '));
    }
    if (regularAttributes.isNotEmpty) {
      nameParts.add(regularAttributes.join(', '));
    }
    
    return nameParts.join(': ');
  }
}
```

**–í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏:**
```dart
// –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–∞
void _onProductQuantityChanged(int index, String quantity) {
  // ... –æ–±–Ω–æ–≤–ª—è–µ–º _products[index]
  _calculateProductNameAndVolume(index);  // ‚Üê –ü–µ—Ä–µ–¥–∞—ë–º –∏–Ω–¥–µ–∫—Å
}

// –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∞—Ç—Ä–∏–±—É—Ç–∞
void _onProductAttributeChanged(TextEditingController controller) {
  for (int i = 0; i < _products.length; i++) {
    if (_products[i].attributeControllers.containsValue(controller)) {
      _calculateProductNameAndVolume(i);  // ‚Üê –ù–∞—Ö–æ–¥–∏–º –∏–Ω–¥–µ–∫—Å –∏ –≤—ã–∑—ã–≤–∞–µ–º
      break;
    }
  }
}
```

---

## üìå –û–¢–õ–ò–ß–ò–ï #2: –û–ë–ù–û–í–õ–ï–ù–ò–ï –°–û–°–¢–û–Ø–ù–ò–Ø

### –ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞

```dart
void _calculateNameAndVolume() {
  if (_selectedTemplate == null || _quantityController.text.isEmpty) {
    _nameController.text = '';
    _calculatedVolumeController.text = '';
    return;
  }

  // –ü—Ä—è–º–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤
  _nameController.text = _generateProductName();
  _calculatedVolumeController.text = _calculateVolume();
  
  // setState() –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–ª—É—à–∞—Ç–µ–ª—è–º–∏
}
```

### –¢–æ–≤–∞—Ä—ã –≤ –ø—É—Ç–∏

```dart
void _calculateProductNameAndVolume(int index) {
  final product = _products[index];
  if (product.template == null || product.quantity.isEmpty) {
    // –°–æ–∑–¥–∞—ë–º –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç ProductFormData —Å –ø—É—Å—Ç—ã–º –∏–º–µ–Ω–µ–º
    setState(() {
      _products[index] = ProductFormData(
        productTemplateId: product.productTemplateId,
        quantity: product.quantity,
        name: '',  // ‚Üê –û—á–∏—â–∞–µ–º
        calculatedVolume: '',  // ‚Üê –û—á–∏—â–∞–µ–º
        attributes: product.attributes,
        template: product.template,
        attributeControllers: product.attributeControllers,
        quantityController: product.quantityController,
      );
    });
    return;
  }
  
  // –§–æ—Ä–º–∏—Ä—É–µ–º –Ω–æ–≤–æ–µ –∏–º—è
  final name = _generateProductName(index);
  final volume = _calculateProductVolume(index);

  // –°–æ–∑–¥–∞—ë–º –ù–û–í–´–ô –æ–±—ä–µ–∫—Ç —Å–æ –≤—Å–µ–º–∏ –¥–∞–Ω–Ω—ã–º–∏
  setState(() {
    _products[index] = ProductFormData(
      productTemplateId: product.productTemplateId,
      quantity: product.quantity,
      name: name,  // ‚Üê –ù–æ–≤–æ–µ –∏–º—è
      calculatedVolume: volume,  // ‚Üê –ù–æ–≤—ã–π –æ–±—ä—ë–º
      attributes: product.attributes,
      template: product.template,
      attributeControllers: product.attributeControllers,
      quantityController: product.quantityController,
    );
  });
}
```

---

## üìå –û–¢–õ–ò–ß–ò–ï #3: –û–¢–û–ë–†–ê–ñ–ï–ù–ò–ï –ò–ú–ï–ù–ò –ù–ê –ö–ê–†–¢–û–ß–ö–ï –¢–û–í–ê–†–ê

### –ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ (product_inflow_list_page.dart)

```dart
Widget _buildProductHeader(String fullName) {
  // –†–∞–∑–±–∏–≤–∞–µ–º –ø–æ –¥–≤–æ–µ—Ç–æ—á–∏—é
  if (fullName.contains(':')) {
    final parts = fullName.split(':');
    final productName = parts[0].trim();
    final characteristics = parts.sublist(1).join(':').trim();
    
    // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –Ω–∞ –¥–≤–µ —Å—Ç—Ä–æ–∫–∏
    return Column(
      crossAxisAlignment: CrossAxisAlignment.start,
      children: [
        Text('$productName:', style: TextStyle(fontSize: 16, fontWeight: FontWeight.w600)),
        const SizedBox(height: 4),
        Text(characteristics, style: TextStyle(fontSize: 14, color: Colors.grey.shade700))
      ],
    );
  }
  
  // –ï—Å–ª–∏ –Ω–µ—Ç –¥–≤–æ–µ—Ç–æ—á–∏—è, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–∞–∫ –µ—Å—Ç—å
  return Text(fullName, style: TextStyle(fontSize: 16, fontWeight: FontWeight.w600));
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞ —ç–∫—Ä–∞–Ω–µ:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –î–æ—Å–∫–∞:                      ‚îÇ  ‚Üê –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
‚îÇ 20 x 30, –°–æ—Å–Ω–∞              ‚îÇ  ‚Üê –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ (—Å–µ—Ä—ã–π)
‚îÇ                             ‚îÇ
‚îÇ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: 100 —à—Ç          ‚îÇ
‚îÇ –û–±—ä–µ–º: 0.600 –º¬≥             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –¢–æ–≤–∞—Ä—ã –≤ –ø—É—Ç–∏ (product_in_transit_list_page.dart)

```dart
Widget _buildProductHeader(String fullName) {
  // –†–∞–∑–±–∏–≤–∞–µ–º –ø–æ –¥–≤–æ–µ—Ç–æ—á–∏—é - –ò–î–ï–ù–¢–ò–ß–ù–´–ô –ö–û–î
  if (fullName.contains(':')) {
    final parts = fullName.split(':');
    final productName = parts[0].trim();
    final characteristics = parts.sublist(1).join(':').trim();
    
    return Column(
      crossAxisAlignment: CrossAxisAlignment.start,
      children: [
        Text('$productName:', style: TextStyle(fontSize: 16, fontWeight: FontWeight.w600)),
        const SizedBox(height: 4),
        Text(characteristics, style: TextStyle(fontSize: 14, color: Colors.grey.shade700))
      ],
    );
  }
  
  return Text(fullName, style: TextStyle(fontSize: 16, fontWeight: FontWeight.w600));
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞ —ç–∫—Ä–∞–Ω–µ - –ò–î–ï–ù–¢–ò–ß–ù–´–ô**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –î–æ—Å–∫–∞:                      ‚îÇ  ‚Üê –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
‚îÇ 20 x 30, –°–æ—Å–Ω–∞              ‚îÇ  ‚Üê –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ (—Å–µ—Ä—ã–π)
‚îÇ                             ‚îÇ
‚îÇ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: 100 —à—Ç          ‚îÇ
‚îÇ –û–±—ä–µ–º: 0.600 –º¬≥             ‚îÇ
‚îÇ –î–∞—Ç–∞ –æ—Ç–≥—Ä—É–∑–∫–∏: 2024-01-15   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üéØ –¢–ê–ë–õ–ò–¶–ê –†–ê–ó–õ–ò–ß–ò–ô

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ | –¢–æ–≤–∞—Ä—ã –≤ –ø—É—Ç–∏ |
|----------|------------------|-----------------|
| **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤** | 1 (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ) | N (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ) |
| **–¢–∏–ø –¥–∞–Ω–Ω—ã—Ö** | –û—Ç–¥–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ | –ú–∞—Å—Å–∏–≤ `List<ProductFormData>` |
| **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–º–µ–Ω–∏** | –í `_nameController` | –í –æ–±—ä–µ–∫—Ç–µ `ProductFormData.name` |
| **–ü–µ—Ä–µ—Å—á—ë—Ç –∏–º–µ–Ω–∏** | `_generateProductName()` | `_generateProductName(index)` |
| **–§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ—Å—á—ë—Ç–∞** | `_calculateNameAndVolume()` | `_calculateProductNameAndVolume(index)` |
| **setState() –≤—ã–∑–æ–≤—ã** | –ù–µ—è–≤–Ω—ã–µ (—á–µ—Ä–µ–∑ —Å–ª—É—à–∞—Ç–µ–ª–∏) | –Ø–≤–Ω—ã–µ –≤ `_calculateProductNameAndVolume` |
| **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ** | –ò–¥–µ–Ω—Ç–∏—á–Ω–æ–µ —Ä–∞–∑–±–æ—Ä—É –ø–æ `:` | –ò–¥–µ–Ω—Ç–∏—á–Ω–æ–µ —Ä–∞–∑–±–æ—Ä—É –ø–æ `:` |
| **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞—Ç—ã** | –¢–æ–ª—å–∫–æ –¥–∞—Ç–∞ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è | –î–∞—Ç–∞ –æ—Ç–≥—Ä—É–∑–∫–∏ + –æ–∂–∏–¥–∞–µ–º–∞—è –¥–∞—Ç–∞ –ø—Ä–∏–±—ã—Ç–∏—è |
| **–ú–µ—Å—Ç–æ –æ—Ç–≥—Ä—É–∑–∫–∏** | ‚ùå –ù–µ—Ç | ‚úÖ –ï—Å—Ç—å |

---

## ‚úÖ –í–´–í–û–î–´—ë

### –°—Ö–æ–¥—Å—Ç–≤–∞:
1. ‚úÖ **–ê–ª–≥–æ—Ä–∏—Ç–º —Å–æ–∑–¥–∞–Ω–∏—è –∏–º–µ–Ω–∏ –∏–¥–µ–Ω—Ç–∏—á–µ–Ω** - –æ–¥–Ω–∞ –∏ —Ç–∞ –∂–µ –ª–æ–≥–∏–∫–∞ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –∞—Ç—Ä–∏–±—É—Ç–æ–≤
2. ‚úÖ **–§–æ—Ä–º–∞—Ç –∏–º–µ–Ω–∏ –æ–¥–∏–Ω–∞–∫–æ–≤** - `[–®–∞–±–ª–æ–Ω]: [–ê—Ç—Ä–∏–±—É—Ç—ã —Ñ–æ—Ä–º—É–ª—ã x], [–û—Å—Ç–∞–ª—å–Ω—ã–µ]`
3. ‚úÖ **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–µ –∏–¥–µ–Ω—Ç–∏—á–Ω–æ** - —Ä–∞–∑–±–æ—Ä –ø–æ –¥–≤–æ–µ—Ç–æ—á–∏—é –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
4. ‚úÖ **–¢—Ä–∏–≥–≥–µ—Ä—ã –ø–µ—Ä–µ—Å—á—ë—Ç–∞ –æ–¥–∏–Ω–∞–∫–æ–≤—ã** - –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏ –∞—Ç—Ä–∏–±—É—Ç–æ–≤

### –û—Ç–ª–∏—á–∏—è:
1. ‚ùå **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö** - –ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–æ—Å—Ç—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –¢–æ–≤–∞—Ä—ã –≤ –ø—É—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –º–∞—Å—Å–∏–≤
2. ‚ùå **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è** - –ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ = –ø—Ä—è–º–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤, –¢–æ–≤–∞—Ä—ã –≤ –ø—É—Ç–∏ = –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞
3. ‚ùå **–ú–µ—Ç–æ–¥—ã –ø–µ—Ä–µ—Å—á—ë—Ç–∞** - –ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ = –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, –¢–æ–≤–∞—Ä—ã –≤ –ø—É—Ç–∏ = —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º index
4. ‚ùå **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤** - –ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ = 1, –¢–æ–≤–∞—Ä—ã –≤ –ø—É—Ç–∏ = –º–Ω–æ–≥–æ

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
- üîÑ **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥**: –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –æ–±—â—É—é —É—Ç–∏–ª–∏—Ç—É `generateProductName()` –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞
- üì¶ **–ö–ª–∞—Å—Å-–ø–æ–º–æ—â–Ω–∏–∫**: –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å `ProductNameGenerator` –¥–ª—è –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏–∏ –ª–æ–≥–∏–∫–∏
- üß™ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –û–±–∞ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ –º–æ–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å –æ–¥–Ω–∏–º –Ω–∞–±–æ—Ä–æ–º —Ç–µ—Å—Ç–æ–≤

---

## üìä –í–ò–ó–£–ê–õ–¨–ù–´–ï –î–ò–ê–ì–†–ê–ú–ú–´ –ü–û–¢–û–ö–ê

### –ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ - –ü–†–û–°–¢–û–ô –ü–û–¢–û–ö

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         –§–û–†–ú–ê –ü–û–°–¢–£–ü–õ–ï–ù–ò–Ø –¢–û–í–ê–†–ê                            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚îÇ
                   –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç:
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚ñº                 ‚ñº              ‚ñº              ‚ñº
    –°–∫–ª–∞–¥          –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å   –®–∞–±–ª–æ–Ω —Ç–æ–≤–∞—Ä–∞   –î–∞—Ç–∞
        ‚îÇ                 ‚îÇ              ‚îÇ              ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚îÇ
                     ‚ñº      ‚ñº     ‚ñº
                  –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —à–∞–±–ª–æ–Ω–∞:
                  _onTemplateChanged()
                        ‚îÇ
                        ‚ñº
                _loadTemplateAttributes()
                  (–∑–∞–≥—Ä—É–∂–∞–µ–º –∞—Ç—Ä–∏–±—É—Ç—ã)
                        ‚îÇ
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚ñº                             ‚ñº
    –ü—Ä–∏ –≤–≤–æ–¥–µ           –ü—Ä–∏ –≤—ã–±–æ—Ä–µ –∞—Ç—Ä–∏–±—É—Ç–æ–≤
    –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞          (number/select)
    _onQuantityChanged() _onAttributeChanged()
         ‚îÇ                             ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚îÇ
                        ‚ñº
            _calculateNameAndVolume()
                        ‚îÇ
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚ñº                             ‚ñº
    _generateProductName()      _calculateVolume()
         ‚îÇ                             ‚îÇ
         ‚îÇ  –°–æ–±–∏—Ä–∞–µ–º –∞—Ç—Ä–∏–±—É—Ç—ã         ‚îÇ
         ‚îÇ  1. –†–∞–∑–¥–µ–ª—è–µ–º –ø–æ —Ç–∏–ø–∞–º     ‚îÇ
         ‚îÇ  2. –§–æ—Ä–º–∏—Ä—É–µ–º nameParts[]  ‚îÇ
         ‚îÇ  3. –û–±—ä–µ–¥–∏–Ω—è–µ–º —Å ': '      ‚îÇ
         ‚îÇ                             ‚îÇ
    "–î–æ—Å–∫–∞: 20 x 30, –°–æ—Å–Ω–∞"    "0.600"
         ‚îÇ                             ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚îÇ
                        ‚ñº
        –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã:
        _nameController.text = ...
        _calculatedVolumeController.text = ...
                        ‚îÇ
                        ‚ñº
        –ù–∞ —ç–∫—Ä–∞–Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
        (–ø–æ–ª–µ "–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ" readonly)
```

### –¢–æ–≤–∞—Ä—ã –≤ –ø—É—Ç–∏ - –°–õ–û–ñ–ù–´–ô –ü–û–¢–û–ö

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         –§–û–†–ú–ê –¢–û–í–ê–†–û–í –í –ü–£–¢–ò (–ú–ù–û–ñ–ï–°–¢–í–ï–ù–ù–´–ï)                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚îÇ
                   –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç:
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚ñº                 ‚ñº              ‚ñº
      –û–±—â–∏–µ –¥–∞–Ω–Ω—ã–µ      –¢–æ–≤–∞—Ä—ã 1      –¢–æ–≤–∞—Ä—ã 2 ...
    (–°–∫–ª–∞–¥, –î–∞—Ç–∞)    (—à–∞–±–ª–æ–Ω,       (—à–∞–±–ª–æ–Ω,
      –æ—Ç–≥—Ä—É–∑–∫–∏       –∫–æ–ª-–≤–æ,–∞—Ç—Ä)    –∫–æ–ª-–≤–æ,–∞—Ç—Ä)
                        ‚îÇ               ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
        ‚ñº                               ‚ñº
    _products[0]                    _products[1]
    ProductFormData                 ProductFormData
      ‚îú‚îÄ template                     ‚îú‚îÄ template
      ‚îú‚îÄ quantity                     ‚îú‚îÄ quantity
      ‚îú‚îÄ name                         ‚îú‚îÄ name
      ‚îú‚îÄ calculatedVolume             ‚îú‚îÄ calculatedVolume
      ‚îî‚îÄ attributeControllers[]       ‚îî‚îÄ attributeControllers[]


–ü–æ—Ç–æ–∫ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏:
  
  –ü—Ä–∏ –≤—ã–±–æ—Ä–µ —à–∞–±–ª–æ–Ω–∞ (—Ç–æ–≤–∞—Ä 0):
  _onProductTemplateChanged(0, templateId)
          ‚îÇ
          ‚îú‚îÄ setState({ _products[0] = ... })
          ‚îÇ
          ‚îú‚îÄ _loadProductTemplateAttributes(0, templateId)
          ‚îÇ     ‚îî‚îÄ –ó–∞–≥—Ä—É–∂–∞–µ–º –∞—Ç—Ä–∏–±—É—Ç—ã –¥–ª—è —Ç–æ–≤–∞—Ä–∞ 0
          ‚îÇ
          ‚îî‚îÄ _calculateProductNameAndVolume(0)


  –ü—Ä–∏ –≤–≤–æ–¥–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ (—Ç–æ–≤–∞—Ä 0):
  _onProductQuantityChanged(0, quantity)
          ‚îÇ
          ‚îú‚îÄ setState({ _products[0].quantity = quantity })
          ‚îÇ
          ‚îî‚îÄ _calculateProductNameAndVolume(0)


  –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∞—Ç—Ä–∏–±—É—Ç–∞ (—Ç–æ–≤–∞—Ä 0):
  _onProductAttributeChanged(controller)
          ‚îÇ
          ‚îú‚îÄ –ò—â–µ–º –∫–∞–∫–æ–π —Ç–æ–≤–∞—Ä —Å–æ–¥–µ—Ä–∂–∏—Ç —ç—Ç–æ—Ç controller
          ‚îÇ  for (int i = 0; i < _products.length; i++)
          ‚îÇ    if (_products[i].attributeControllers.containsValue(controller))
          ‚îÇ
          ‚îú‚îÄ –ù–∞—à–ª–∏: –∏–Ω–¥–µ–∫—Å = 0
          ‚îÇ
          ‚îî‚îÄ _calculateProductNameAndVolume(0)


  –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ—Å—á—ë—Ç–∞:
  _calculateProductNameAndVolume(0)
          ‚îÇ
          ‚ñº
    final product = _products[0]
          ‚îÇ
    if (product.template == null || product.quantity.isEmpty)
          ‚îú‚îÄ true  ‚Üí setState({ _products[0].name = '' })
          ‚îÇ
          ‚îî‚îÄ false ‚Üí –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º
                    name = _generateProductName(0)
                    volume = _calculateProductVolume(0)
                    ‚îÇ
                    setState({
                      _products[0] = ProductFormData(
                        name: name,
                        calculatedVolume: volume,
                        ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
                      )
                    })
```

---

## üîÑ –°–†–ê–í–ù–ï–ù–ò–ï –í–´–ó–û–í–û–í

### –ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞: –ü—Ä–æ—Å—Ç–æ–π —Å–ª—É—á–∞–π

```dart
// 1Ô∏è‚É£  –í—ã–±–∏—Ä–∞–µ–º —à–∞–±–ª–æ–Ω
_selectedProductTemplateId = 5;
_onTemplateChanged();
  ‚Üì
_loadTemplateAttributes();  // –ó–∞–≥—Ä—É–∂–∞–µ–º –∞—Ç—Ä–∏–±—É—Ç—ã —à–∞–±–ª–æ–Ω–∞ 5
_calculateNameAndVolume();
  ‚îú‚îÄ _nameController.text = _generateProductName()
  ‚îî‚îÄ _calculatedVolumeController.text = _calculateVolume()

// 2Ô∏è‚É£  –í–≤–æ–¥–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
_quantityController.text = "100";
_onQuantityChanged();
  ‚Üì
_calculateNameAndVolume();
  ‚îú‚îÄ _nameController.text = _generateProductName()
  ‚îî‚îÄ _calculatedVolumeController.text = _calculateVolume()

// 3Ô∏è‚É£  –í—ã–±–∏—Ä–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–∞ "–î–ª–∏–Ω–∞"
_attributeControllers['length'].text = "20";
_onAttributeChanged();
  ‚Üì
_calculateNameAndVolume();
  ‚îú‚îÄ _nameController.text = _generateProductName()
  ‚îî‚îÄ _calculatedVolumeController.text = _calculateVolume()
```

### –¢–æ–≤–∞—Ä—ã –≤ –ø—É—Ç–∏: –°–ª–æ–∂–Ω—ã–π —Å–ª—É—á–∞–π —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Ç–æ–≤–∞—Ä–∞–º–∏

```dart
// 1Ô∏è‚É£  –¢–æ–≤–∞—Ä 0: –í—ã–±–∏—Ä–∞–µ–º —à–∞–±–ª–æ–Ω
_products[0].productTemplateId = 5;
_onProductTemplateChanged(0, 5);
  ‚Üì
_loadProductTemplateAttributes(0, 5);  // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–ª—è —Ç–æ–≤–∞—Ä–∞ 0
_calculateProductNameAndVolume(0);
  ‚îú‚îÄ _products[0].name = _generateProductName(0)
  ‚îî‚îÄ _products[0].calculatedVolume = _calculateProductVolume(0)

// 2Ô∏è‚É£  –î–æ–±–∞–≤–ª—è–µ–º –≤—Ç–æ—Ä–æ–π —Ç–æ–≤–∞—Ä
_addProduct();  // _products.length == 2

// 3Ô∏è‚É£  –¢–æ–≤–∞—Ä 1: –í—ã–±–∏—Ä–∞–µ–º —à–∞–±–ª–æ–Ω
_products[1].productTemplateId = 7;
_onProductTemplateChanged(1, 7);
  ‚Üì
_loadProductTemplateAttributes(1, 7);  // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–ª—è —Ç–æ–≤–∞—Ä–∞ 1
_calculateProductNameAndVolume(1);
  ‚îú‚îÄ _products[1].name = _generateProductName(1)
  ‚îî‚îÄ _products[1].calculatedVolume = _calculateProductVolume(1)

// 4Ô∏è‚É£  –¢–æ–≤–∞—Ä 0: –í–≤–æ–¥–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
_products[0].quantityController.text = "100";
_onProductQuantityChanged(0, "100");
  ‚Üì
_calculateProductNameAndVolume(0);
  ‚îú‚îÄ _products[0].name = _generateProductName(0)
  ‚îî‚îÄ _products[0].calculatedVolume = _calculateProductVolume(0)

// 5Ô∏è‚É£  –¢–æ–≤–∞—Ä 1: –í–≤–æ–¥–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
_products[1].quantityController.text = "50";
_onProductQuantityChanged(1, "50");
  ‚Üì
_calculateProductNameAndVolume(1);
  ‚îú‚îÄ _products[1].name = _generateProductName(1)
  ‚îî‚îÄ _products[1].calculatedVolume = _calculateProductVolume(1)
```

---

## üìù –ö–û–î: –Ø–î–†–û –ê–õ–ì–û–†–ò–¢–ú–ê

–í–æ—Ç —Ç–æ—á–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º (**–∏–¥–µ–Ω—Ç–∏—á–Ω—ã–π –≤ –æ–±–æ–∏—Ö –º–µ—Å—Ç–∞—Ö**):

```dart
String _generateProductName(/* optional index */) {
  // –ü–æ–ª—É—á–∏—Ç—å —à–∞–±–ª–æ–Ω
  final template = /* _selectedTemplate –∏–ª–∏ _products[index].template */;
  if (template == null) return '';

  // –†–∞–∑–¥–µ–ª–∏—Ç—å –∞—Ç—Ä–∏–±—É—Ç—ã –Ω–∞ –¥–≤–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
  final formulaAttributes = <String>[];
  final regularAttributes = <String>[];

  for (final attribute in template.attributes) {
    final value = /* –ø–æ–ª—É—á–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–∞ */;
    if (value.isEmpty) continue;

    // –ö–∞—Ç–µ–≥–æ—Ä–∏—è 1: –ê—Ç—Ä–∏–±—É—Ç—ã, –≤—Ö–æ–¥—è—â–∏–µ –≤ —Ñ–æ—Ä–º—É–ª—É (—Ä–∞–∑–º–µ—Ä—ã, –≤–µ—Å –∏ —Ç.–¥.)
    if (attribute.isInFormula) {
      formulaAttributes.add(value);
    }
    // –ö–∞—Ç–µ–≥–æ—Ä–∏—è 2: –û—Å—Ç–∞–ª—å–Ω—ã–µ —á–∏—Å–ª–æ–≤—ã–µ –∏ –≤—ã–±–æ—Ä–æ—á–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã
    else if (attribute.type == 'number' || attribute.type == 'select') {
      regularAttributes.add(value);
    }
  }

  // –ü–æ—Å—Ç—Ä–æ–∏—Ç—å –∏–º—è
  final List<String> nameParts = [template.name];

  // –î–æ–±–∞–≤–∏—Ç—å –∞—Ç—Ä–∏–±—É—Ç—ã —Ñ–æ—Ä–º—É–ª—ã (—Å–æ–µ–¥–∏–Ω–µ–Ω—ã —Å ' x ')
  if (formulaAttributes.isNotEmpty) {
    nameParts.add(formulaAttributes.join(' x '));
  }

  // –î–æ–±–∞–≤–∏—Ç—å –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã (—Å–æ–µ–¥–∏–Ω–µ–Ω—ã —Å ', ')
  if (regularAttributes.isNotEmpty) {
    nameParts.add(regularAttributes.join(', '));
  }

  // –û–±—ä–µ–¥–∏–Ω–∏—Ç—å –≤—Å–µ —á–∞—Å—Ç–∏ –¥–≤–æ–µ—Ç–æ—á–∏–µ–º
  return nameParts.join(': ');
}
```

### –ü—Ä–∏–º–µ—Ä—ã –≤—ã—Ö–æ–¥–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π:

```
–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
  –®–∞–±–ª–æ–Ω: "–î–æ—Å–∫–∞"
  –ê—Ç—Ä–∏–±—É—Ç—ã (isInFormula=true): ["20", "30"]  ‚Üí —Ä–∞–∑–º–µ—Ä—ã
  –ê—Ç—Ä–∏–±—É—Ç—ã (–æ—Å—Ç–∞–ª—å–Ω—ã–µ): ["–°–æ—Å–Ω–∞"]            ‚Üí –º–∞—Ç–µ—Ä–∏–∞–ª
  
–í—ã—Ö–æ–¥:
  "–î–æ—Å–∫–∞: 20 x 30, –°–æ—Å–Ω–∞"

---

–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
  –®–∞–±–ª–æ–Ω: "–ö—Ä–∞—Å–∫–∞"
  –ê—Ç—Ä–∏–±—É—Ç—ã (isInFormula=true): []
  –ê—Ç—Ä–∏–±—É—Ç—ã (–æ—Å—Ç–∞–ª—å–Ω—ã–µ): ["–ö—Ä–∞—Å–Ω—ã–π", "–ì–ª—è–Ω—Ü–µ–≤–∞—è"]
  
–í—ã—Ö–æ–¥:
  "–ö—Ä–∞—Å–∫–∞: –ö—Ä–∞—Å–Ω—ã–π, –ì–ª—è–Ω—Ü–µ–≤–∞—è"

---

–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
  –®–∞–±–ª–æ–Ω: "–ì–≤–æ–∑–¥–∏"
  –ê—Ç—Ä–∏–±—É—Ç—ã (isInFormula=true): ["50"]  ‚Üí –¥–ª–∏–Ω–∞
  –ê—Ç—Ä–∏–±—É—Ç—ã (–æ—Å—Ç–∞–ª—å–Ω—ã–µ): []
  
–í—ã—Ö–æ–¥:
  "–ì–≤–æ–∑–¥–∏: 50"
```

---

## üéØ –ü–†–ê–ö–¢–ò–ß–ï–°–ö–ò–ô –ü–†–ò–ú–ï–†: –ü–û–®–ê–ì–û–í–û–ï –°–û–ó–î–ê–ù–ò–ï –ò–ú–ï–ù–ò

### –°—Ü–µ–Ω–∞—Ä–∏–π: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞—ë—Ç —Ç–æ–≤–∞—Ä "–î–æ—Å–∫–∞"

**–®–∞–≥ 1: –í—ã–±–æ—Ä —à–∞–±–ª–æ–Ω–∞**
- –®–∞–±–ª–æ–Ω: –î–æ—Å–∫–∞ (id=1)
- –ê—Ç—Ä–∏–±—É—Ç—ã —à–∞–±–ª–æ–Ω–∞ –∑–∞–≥—Ä—É–∂–µ–Ω—ã:
  ```
  id | name     | variable | type   | isInFormula
  ---|----------|----------|--------|------------
  1  | –î–ª–∏–Ω–∞    | length   | number | true
  2  | –®–∏—Ä–∏–Ω–∞   | width    | number | true
  3  | –ú–∞—Ç–µ—Ä–∏–∞–ª | material | select | false
  ```

**–®–∞–≥ 2: –í–≤–æ–¥ –∑–Ω–∞—á–µ–Ω–∏–π**
```
length = 20
width = 30
material = "–°–æ—Å–Ω–∞"
quantity = 100
```

**–®–∞–≥ 3: –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –∏–º–µ–Ω–∏**

```dart
// 1. –ü–æ–ª—É—á–∞–µ–º –∞—Ç—Ä–∏–±—É—Ç—ã
formulaAttributes = [];
regularAttributes = [];

// 2. –ü—Ä–æ—Ö–æ–¥–∏–º –ø–æ –∞—Ç—Ä–∏–±—É—Ç–∞–º
attribute[0]: name="–î–ª–∏–Ω–∞", isInFormula=true, value="20"
  ‚Üí formulaAttributes.add("20")  // ["20"]

attribute[1]: name="–®–∏—Ä–∏–Ω–∞", isInFormula=true, value="30"
  ‚Üí formulaAttributes.add("30")  // ["20", "30"]

attribute[2]: name="–ú–∞—Ç–µ—Ä–∏–∞–ª", isInFormula=false, type="select", value="–°–æ—Å–Ω–∞"
  ‚Üí regularAttributes.add("–°–æ—Å–Ω–∞")  // ["–°–æ—Å–Ω–∞"]

// 3. –°—Ç—Ä–æ–∏–º nameParts
nameParts = ["–î–æ—Å–∫–∞"]
nameParts.add(["20", "30"].join(' x '))  // ["–î–æ—Å–∫–∞", "20 x 30"]
nameParts.add(["–°–æ—Å–Ω–∞"].join(', '))      // ["–î–æ—Å–∫–∞", "20 x 30", "–°–æ—Å–Ω–∞"]

// 4. –û–±—ä–µ–¥–∏–Ω—è–µ–º
return ["–î–æ—Å–∫–∞", "20 x 30", "–°–æ—Å–Ω–∞"].join(': ')
     = "–î–æ—Å–∫–∞: 20 x 30, –°–æ—Å–Ω–∞"
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞ —ç–∫—Ä–∞–Ω–µ:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –î–æ—Å–∫–∞:               ‚îÇ  ‚Üê –ù–∞–∑–≤–∞–Ω–∏–µ (–∂–∏—Ä–Ω—ã–π)
‚îÇ 20 x 30, –°–æ—Å–Ω–∞       ‚îÇ  ‚Üê –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ (—Å–µ—Ä—ã–π)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## ‚ùì –ß–ê–°–¢–û –ó–ê–î–ê–í–ê–ï–ú–´–ï –í–û–ü–†–û–°–´

### Q1: –ü–æ—á–µ–º—É –∞—Ç—Ä–∏–±—É—Ç—ã —Ä–∞–∑–¥–µ–ª–µ–Ω—ã –Ω–∞ –¥–≤–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏?
**A:** –ü–æ—Ç–æ–º—É —á—Ç–æ:
- –ê—Ç—Ä–∏–±—É—Ç—ã –≤ —Ñ–æ—Ä–º—É–ª–µ (–¥–ª–∏–Ω–∞, —à–∏—Ä–∏–Ω–∞, –≤–µ—Å) ‚Üí –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç —Ä–∞–∑–º–µ—Ä/–æ–±—ä—ë–º ‚Üí –æ–Ω–∏ **—Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã** ‚Üí –≤ –Ω–∞—á–∞–ª–æ –∏–º–µ–Ω–∏
- –û—Å—Ç–∞–ª—å–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã (–º–∞—Ç–µ—Ä–∏–∞–ª, —Ü–≤–µ—Ç) ‚Üí –æ–ø–∏—Å—ã–≤–∞—é—Ç —Å–≤–æ–π—Å—Ç–≤–∞ ‚Üí –æ–Ω–∏ **–≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã** ‚Üí –≤ –∫–æ–Ω–µ—Ü –∏–º–µ–Ω–∏

–≠—Ç–æ –æ–±–ª–µ–≥—á–∞–µ—Ç —á—Ç–µ–Ω–∏–µ –∏–º–µ–Ω–∏: `[–û—Å–Ω–æ–≤–Ω–æ–µ]: [–†–∞–∑–º–µ—Ä—ã], [–°–≤–æ–π—Å—Ç–≤–∞]`

### Q2: –ü–æ—á–µ–º—É –ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ = 1 —Ç–æ–≤–∞—Ä, –∞ –¢–æ–≤–∞—Ä—ã –≤ –ø—É—Ç–∏ = –º–Ω–æ–≥–æ?
**A:** –≠—Ç–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –±–∏–∑–Ω–µ—Å–∞:
- **–ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞** - —ç—Ç–æ –ø—Ä–∏—ë–º –æ–¥–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ –Ω–∞ —Å–∫–ª–∞–¥ (–¥–æ–∫—É–º–µ–Ω—Ç = –æ–¥–Ω–∞ —Ç–æ–≤–∞—Ä–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è)
- **–¢–æ–≤–∞—Ä—ã –≤ –ø—É—Ç–∏** - —ç—Ç–æ –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø–∞—Ä—Ç–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤ –≤ —Ä–∞–∑–Ω—ã–µ –º–µ—Å—Ç–∞ (–¥–æ–∫—É–º–µ–Ω—Ç = –º–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π)

### Q3: –ú–æ–∂–Ω–æ –ª–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è?
**A:** –î–∞! –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å-–ø–æ–º–æ—â–Ω–∏–∫:

```dart
class ProductNameGenerator {
  static String generate({
    required String templateName,
    required List<ProductAttributeModel> attributes,
    required Map<String, String> attributeValues,
  }) {
    final formulaAttributes = <String>[];
    final regularAttributes = <String>[];

    for (final attribute in attributes) {
      final value = attributeValues[attribute.variable] ?? '';
      if (value.isEmpty) continue;

      if (attribute.isInFormula) {
        formulaAttributes.add(value);
      } else if (attribute.type == 'number' || attribute.type == 'select') {
        regularAttributes.add(value);
      }
    }

    final nameParts = [templateName];
    if (formulaAttributes.isNotEmpty) {
      nameParts.add(formulaAttributes.join(' x '));
    }
    if (regularAttributes.isNotEmpty) {
      nameParts.add(regularAttributes.join(', '));
    }

    return nameParts.join(': ');
  }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏–∏:
_nameController.text = ProductNameGenerator.generate(
  templateName: _selectedTemplate!.name,
  attributes: _selectedTemplate!.attributes,
  attributeValues: {
    for (var entry in _attributeControllers.entries)
      entry.key: entry.value.text
  },
);

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –¢–æ–≤–∞—Ä–∞—Ö –≤ –ø—É—Ç–∏:
final name = ProductNameGenerator.generate(
  templateName: _products[index].template!.name,
  attributes: _products[index].template!.attributes,
  attributeValues: {
    for (var entry in _products[index].attributeControllers.entries)
      entry.key: entry.value.text
  },
);
```
